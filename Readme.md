# TRAP debug tool

## Intro and people

TRAP debug tool designed for Laboratory of IoT project course

[Prof. Brunelli Davide,

Prof. Fontanelli Davide, 

PhD. Alessandro Torrisi] 

and designed by Matteo Spadetto [214352]     

This sysgtem is intended as a debug tool for the TRAP research of Embedded sytems lab in UniTn

## Short what is it

The tool (using Node_RED, Grafana, InfluxDB, Python and a Linux bash file) reads the data from uart that several devices, which are communicating between eachothers, sends to the broker. The goal is not only to debug the system but also to do it with an high level of scalability. For this reason the Node_RED nodes, the InfluxDB (database, measurements and fields) and the Grafana rows/tables are automatically generated by this Python script. After the setup the system runs in online mode and it is possible to see the data collected by the uart on Grafana in graphs and more user-friendly HMI. In Node-RED is also possible to download the csv files from the InfluxDB database (one file for each measurement)                                 

## How to

Install ssh to remote device

Import entire folder (maybe not docs) to remote device

Install Node-RED, Grafana, InfluxDB on remote device

Give ports reading permission with:
```
$ sudo chmod -R 777 /dev/
```

Run bash script with (as arguments the port you wnat to read):
```
$ ./manage_influx_db.sh -r '/dev/ttyACM3 /dev/ttyACM4'
```
If you want to stop the test just type Ctrl + C

When test finishes save the .csv files with:
```
$ ./manage_influx_db.sh -w /path/to/folder/
```
and remember the last "/"

For more datails write to matteo.spadetto-1@studenti.unitn.it